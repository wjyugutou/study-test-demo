import{d as g,i as n,s as f,j as h,ae as w,o as R,a as U,b as s,t as k,f as v,F as y}from"../../assets/index-Jf8bmGHu.js";const B=s("h1",null,"recorder 录音",-1),M=["src"],j=g({description:"Recorder 录音",__name:"recorder",setup(L){const c=n(!1),o=f(),u=f(),l=n([]),d=n(),t=n("blob:http://127.0.0.1:3333/1b7628d0-7b9f-4707-a0eb-3182c2a1dff6");function b(){return new Promise((e,a)=>{var r;(r=navigator==null?void 0:navigator.mediaDevices)==null||r.getUserMedia({audio:!0}).then(i=>{e(i)}).catch(i=>a(i))})}async function p(){var e;if(!((e=navigator==null?void 0:navigator.mediaDevices)!=null&&e.getUserMedia)){alert("浏览器不支持音频输入");return}c.value=!0,l.value=[],u.value=await b(),o.value=new MediaRecorder(u.value),o.value.start(),o.value.ondataavailable=a=>{l.value.push(a.data);const r=new Blob(l.value,{type:"audio/wav"});t.value=URL.createObjectURL(r)}}h(t,(e,a)=>{URL.revokeObjectURL(a)});function m(){c.value=!1,o.value.stop()}function _(){console.log(t.value),d.value.play()}return w(()=>{var e;(e=u.value)==null||e.getTracks().forEach(a=>a.stop())}),(e,a)=>(R(),U(y,null,[B,s("button",{class:"basic-btn",onMousedown:p,onMouseup:m},k(v(c)?"结束":"开始")+"录音 ",33),s("button",{class:"basic-btn",onClick:_}," 播放录音 "),s("audio",{ref_key:"audio",ref:d,src:v(t),preload:"auto"},null,8,M)],64))}});export{j as default};

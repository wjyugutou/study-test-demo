import{d as g,ar as S,i as _,c as C,o as h,a as b,b as s,f as d,v as z,g as P,n as E,q as $,x as W,K as y,L as m,as as T,E as D,h as x,F as N}from"../../assets/index-Jf8bmGHu.js";const k=Symbol("canvasConfig"),B={border:"~ gray-400","border-b":"0",absolute:"","top-0":"","z-1":"","h-50px":"","w-full":"",flex:"","items-center":"","gap-x-5px":"","p-5px":""},V={class:"toolitem"},F=s("label",{for:"strokeStyle","gap-5px":""}," 线条颜色:  ",-1),I=["value"],L={class:"toolitem"},j=s("label",{for:"lineWidth","gap-5px":""}," 线条宽度:  ",-1),H=["value"],K={class:"toolitem"},M=["^active"],O=["value"],R=g({name:"CanvasTool",__name:"CanvasTool",setup(u){const e=S(k),t=_(),n=C(()=>({width:`${e.eraser.size}px`,height:`${e.eraser.size}px`,transformOrigin:"center",transform:`translate3d(calc(${e.eraser.x}px - 50%), calc(${e.eraser.y}px - 50%), 0)`}));function a(i){const c=i.target.value;e.setConfig({[i.target.id]:c})}function p(){e.ctx.clearRect(0,0,e.ctx.canvas.width,e.ctx.canvas.height)}function f(i){e.setEraser(Number.parseInt(i.target.value))}return(i,c)=>{var v;return h(),b("div",B,[s("div",V,[F,s("input",{id:"strokeStyle",value:d(e).config.strokeStyle,type:"color",onChange:a},null,40,I)]),s("div",L,[j,s("input",{id:"lineWidth",value:d(e).config.lineWidth,type:"range",step:"1",min:"1",max:"50",onClick:a},null,8,H)]),s("div",{class:"toolitem"},[s("button",{id:"clear",class:"btn-mask","b-rd-5px":"","p-5px":"",border:"~ gray-400","hover:border":"#000 dark:#fff",onClick:p}," 清空画布 ")]),s("div",K,[s("button",{id:"clear",class:"btn-mask","^active":!!d(e).eraser.enabled,"b-rd-5px":"","p-5px":"",border:"~ gray-400","hover:border":"#000 dark:#fff",onClick:c[0]||(c[0]=r=>d(e).setEraser(!d(e).eraser.enabled))}," 橡皮擦 ",8,M),z("  "),s("input",{id:"eraserSize",value:d(e).eraser.size,type:"range",step:"1",min:"10",max:"50",onChange:f},null,40,O)]),d(e).eraser.enabled?(h(),P($,{key:0,to:((v=d(e).ctx)==null?void 0:v.canvas.parentElement)||"body"},[s("div",{ref_key:"eraser",ref:t,style:E(d(n)),"pointer-events-none":"",absolute:"","top-0":"","z-10":"","h-20px":"","w-20px":"",border:"~ #fff"},null,4)],8,["to"])):W("",!0)])}}});function X(u){const e=_({strokeStyle:"#9aa2ad",fillStyle:"#9aa2ad",lineWidth:10,lineCap:"round"}),t=y({x:0,y:0,size:10,enabled:!1});return y({ctx:u,config:e,eraser:t,setEraser(n){typeof n=="boolean"?t.enabled=n:typeof n=="number"?t.size=n:(t.x=n.x,t.y=n.y)},setConfig(n){Object.keys(n).forEach(a=>{e.value[a]=n[a]})}})}function Y(u,e,t){let n=!1;const a=e,p=Math.PI,f={initPos:{}};function i(r,o){a.beginPath(),a.arc(r,o,a.lineWidth/2,0,p*2),a.fill()}function c(r,o,l,w){a.beginPath(),a.moveTo(r,o),a.lineTo(l,w),a.stroke()}function v(r,o){a.beginPath(),a.clearRect(r-t.eraser.size/2,o-t.eraser.size/2,t.eraser.size,t.eraser.size),a.stroke()}return m(u,"mousedown",r=>{n=!0;const o=r.offsetX,l=r.offsetY;if(f.initPos={x:o,y:l},t.eraser.enabled){t.setEraser({x:o,y:l});return}i(o,l)}),m(u,"mouseup",()=>{n=!1,a.closePath()}),m(u,"mousemove",r=>{const o=r.offsetX,l=r.offsetY;if(t.eraser.enabled){t.setEraser({x:o,y:l}),n&&v(o,l);return}n&&(c(f.initPos.x,f.initPos.y,o,l),f.initPos={x:o,y:l})}),e}const q={relative:"","h-full":"","w-full":"","pt-50px":""},U={relative:"","h-full":"","w-full":"","overflow-hidden":""},A=g({name:"CanvasDraw",__name:"index",setup(u){const e=_(),t=_(),n=X(t),a=C(()=>n.config);T(k,n);function p(){const i=e.value.clientWidth,c=e.value.clientHeight;e.value.width=i,e.value.height=c,t.value=e.value.getContext("2d"),f(),Y(e,t.value,n)}function f(){t.value.strokeStyle=a.value.strokeStyle,t.value.fillStyle=a.value.fillStyle,t.value.lineWidth=a.value.lineWidth,t.value.lineCap=a.value.lineCap}return D(()=>{p()}),(i,c)=>{const v=R;return h(),b("div",q,[x(v),s("div",U,[s("canvas",{ref_key:"canvas",ref:e,"h-full":"","w-full":"",border:"~ gray-400"},null,512)])])}}}),G={w:"1/2"},J={w:"1/2"},Z=g({description:"简单画板",__name:"canvasDrawPage",setup(u){return(e,t)=>{const n=A;return h(),b(N,null,[s("div",G,[x(n)]),s("div",J,[x(n)])],64)}}});export{Z as default};

import{d as H,r as N,z as k,c as i,o as u,x as w,f as D,F as y,k as $,n as S,t as j,b as r,i as M}from"../../assets/index-DOi-xgW3.js";const B=["rowspan","colspan"],I=H({name:"DHeader",__name:"DHeader",props:{columns:{}},setup(v){const h=v,f=N(1),o=k(()=>{g(h.columns,1);const e=[];return m(e,h.columns),e});function g(e,t=1){f.value=Math.max(f.value,t),e.forEach(n=>{n.children&&n.children.length&&g(n.children,t+1)})}function m(e=[],t,n=1,l=1){t.forEach((s,c)=>{const b=l+c,d={...s,row:n,col:b,_id:`${s.label.replace(/\s/g,"_")}-${n}-${b}`};if(e[n-1]=e[n-1]||[],d.children&&d.children.length)d.colspan=A(d),e[n-1].push(d),m(e,d.children,n+1,b);else{const x=f.value-n+1;d.rowspan=x;for(let _=0;_<x;_++){const R={...d,row:n},z=_+n,T=z-1;e[T]=e[T]||[],z>n&&(R.hidden=!0,R.row=_+1),e[T].push({...R,row:z,col:l+c,rowspan:x,colspan:1})}}})}function A(e){let t=0;e.children?.length&&n(e.children);function n(l){t+=l.length,l.forEach(s=>{s.children?.length&&(t-=1,n(s.children))})}return t}console.log("_columns",o.value);const E=k(()=>{const e=[];return o.value.forEach(t=>{const n=[];t.forEach(l=>{for(let s=0;s<l.colspan;s++)n.push(l._id)}),e.push(n)}),a(e)});function a(e){function t(l){return l.replace(/\s+/g,"_")}const n=e.map(l=>`"${l.map(t).join(" ")}"`);return console.log(`${n.join(`
  `)}`),`${n.join(`
  `)}`}function p(e){return{hidden:e.hidden}}return(e,t)=>(u(),i("div",{class:"d-header",style:w({gridTemplateAreas:D(E)})},[(u(!0),i(y,null,$(D(o),(n,l)=>(u(),i(y,{key:l},[(u(!0),i(y,null,$(n,s=>(u(),i("div",{key:s.prop,class:S([p(s),"d-header-cell"]),rowspan:s.rowspan,colspan:s.colspan,style:w({gridArea:s._id})},j(s.label),15,B))),128))],64))),128))],4))}}),C=["rowspan","colspan"],F=H({name:"THeader",__name:"THeader",props:{columns:{}},setup(v){const h=v,f=N(1),o=k(()=>{g(h.columns,1);const a=[];return m(a,h.columns),a});function g(a,p=1){f.value=Math.max(f.value,p),a.forEach(e=>{e.children&&e.children.length&&g(e.children,p+1)})}function m(a=[],p,e=1,t=1){p.forEach((n,l)=>{const s=t+l,c={...n,row:e,col:s};if(a[e-1]=a[e-1]||[],c.children&&c.children.length)c.colspan=A(c),a[e-1].push(c),m(a,c.children,e+1,s);else{const b=f.value-e+1;c.rowspan=b;for(let d=0;d<b;d++){const x=d+e,_=x-1;a[_]=a[_]||[],x>e&&(c.hidden=!0,c.row=d+1),a[_].push({...c,row:x,col:t+l,rowspan:b,colspan:1})}}})}function A(a){let p=0;a.children?.length&&e(a.children);function e(t){p+=t.length,t.forEach(n=>{n.children?.length&&(p-=1,e(n.children))})}return p}console.log("_columns",o.value);function E(a){return{hidden:a.hidden}}return(a,p)=>(u(!0),i(y,null,$(D(o),(e,t)=>(u(),i("tr",{key:t},[(u(!0),i(y,null,$(e,n=>(u(),i("th",{key:n.prop,class:S(E(n)),rowspan:n.rowspan,colspan:n.colspan},j(n.label),11,C))),128))]))),128))}}),L={class:"text-red m-auto m-t-50 bg-blue-500/50 w-50vw",border:""},V={class:"text-red m-auto m-t-50 bg-blue-500/50 w-50vw"},G=H({__name:"tableDemo",setup(v){const h=[{label:"Date",prop:"date"},{label:"Delivery Info",prop:"name",children:[{label:"Name",prop:"name"},{label:"Address Info",prop:"age",children:[{label:"State",prop:"state"},{label:"City",prop:"city"},{label:"Address",prop:"address"},{label:"Zip",prop:"zip",children:[{label:"Name",prop:"name"},{label:"Address Info",prop:"age",children:[{label:"State",prop:"state"},{label:"City",prop:"city"},{label:"Address",prop:"address"},{label:"Zip",prop:"zip"}]}]}]}]}];return(f,o)=>{const g=F,m=I;return u(),i(y,null,[r("table",L,[o[0]||(o[0]=r("caption",null,"表格2",-1)),r("thead",null,[M(g,{columns:h})]),o[1]||(o[1]=r("tbody",null,[r("tr",null,[r("td",{class:"text-center"}," 小明 "),r("td",{class:"text-center"}," 18 "),r("td",{class:"text-center"}," 170 ")]),r("tr",null,[r("td",{colspan:"2",rowspan:"2",class:"text-center"}," 小红 "),r("td",{rowspan:"0",class:"text-center hidden"}," 19 "),r("td",{class:"text-center"}," 171 ")]),r("tr",null,[r("td",{colspan:"0",class:"text-center hidden"}," 小王 "),r("td",{colspan:"0",class:"text-center hidden"}," 20 "),r("td",{class:"text-center"}," 172 ")])],-1)),o[2]||(o[2]=r("tfoot",null,[r("tr",null,[r("td",{colspan:"2",class:"text-center"}," Average age "),r("td",{class:"text-center"}," 33 ")])],-1))]),r("div",V,[M(m,{columns:h})])],64)}}});export{G as default};

import{d as m,c as p,e as s,Z as b,u as f,j as c,F as B,b as D}from"./vue-BNDGywnP.js";const g={"text-12":""},_="MyTestDatabase",k=m({description:"indexDB使用",__name:"indexedDB",setup(x){const l=[{ssn:"444-44-4444",name:"Bill",age:35,email:"bill@company.com"},{ssn:"555-55-5555",name:"Donna",age:32,email:"donna@home.org"}],u=window.indexedDB,a=c(!1),r=c();function d(){return new Promise((t,e)=>{if(a.value)return e(new Error("数据库已打开"));const o=u.open(_);o.onerror=n=>{console.error(n),a.value=!1,e(n)},o.onsuccess=n=>{a.value=!0,r.value=n.target.result,t(n.target.result)},o.onupgradeneeded=n=>{console.log("onupgradeneeded ")}})}function i(){const t=r.value.createObjectStore("names",{autoIncrement:!0});l.forEach(e=>{t.add(e.name)})}return(t,e)=>(D(),p(B,null,[s("h1",g,b(f(a)?"数据库打开成功":"数据库打开失败"),1),s("button",{class:"basicBtn",onClick:d}," 打开数据库 "),s("button",{class:"basicBtn",onClick:i}," 添加一个数据 "),e[0]||(e[0]=s("button",{class:"basicBtn"}," 获取数据 ",-1))],64))}});export{k as default};

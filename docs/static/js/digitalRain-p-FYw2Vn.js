import{r as c}from"./lodash-DuwzciWb.js";import{d as x,j as u,o as b,c as y,e as d,u as f,b as C}from"./vue-BNDGywnP.js";const S={relative:""},k=["width","height"],o=24,B=5,T=x({description:"数字雨",__name:"digitalRain",setup(E){const n=u(0),i=u(0),h=u();n.value=window.innerWidth-32,i.value=window.innerHeight-52-40-50;const l=Math.ceil(i.value/o),v=Math.ceil(n.value/o),m=Array.from({length:v}).map(e=>({index:c(0,l),length:c(l/2,l+20)}));let t;function g(){function e(){t=h.value.getContext("2d"),t.fillStyle="#000",t.fillRect(0,0,n.value,i.value),a()}e(),window.addEventListener("resize",()=>{n.value=window.innerWidth-32,i.value=window.innerHeight-52-40-50})}let r=0;function a(){if(r++,r!==0&&r<B){requestAnimationFrame(a);return}r=0,t.beginPath(),p(),m.forEach((e,s)=>{w(s*o,e.index*o),e.index++,e.index>=e.length&&(e.index=0,e.length=c(0,l))}),t.closePath(),requestAnimationFrame(a)}function p(){t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(0,0,n.value,i.value)}function w(e,s){t.fillStyle="#087b15",t.font=`${o}px STheiti, SimHei`;const _=c(1,9);t.fillText(`${_}`,e,s)}return b(()=>{g()}),(e,s)=>(C(),y("div",S,[d("canvas",{ref_key:"canvasEl",ref:h,width:f(n),height:f(i),bg:"#000"},null,8,k),d("div",{absolute:"","left-0":"","right-0":"","top-0":"","op-0":"","transition-opacity":"","hover:op-100":""},[d("button",{class:"basicBtn",onClick:a}," next "),d("button",{class:"basicBtn","m-l-2":"",onClick:a}," reload ")])]))}});export{T as default};

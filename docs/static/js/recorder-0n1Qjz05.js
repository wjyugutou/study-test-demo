import{d as g,r,Y as d,a as _,a4 as h,c as w,b as n,t as B,f,F as R,o as U}from"../../assets/index-DOi-xgW3.js";const k=["src"],L=g({description:"Recorder 录音",__name:"recorder",setup(y){const s=r(!1),o=d(),c=d(),u=r([]),i=r(),t=r("blob:http://127.0.0.1:3333/1b7628d0-7b9f-4707-a0eb-3182c2a1dff6");function v(){return new Promise((a,e)=>{navigator?.mediaDevices?.getUserMedia({audio:!0}).then(l=>{a(l)}).catch(l=>e(l))})}async function b(){if(!navigator?.mediaDevices?.getUserMedia){alert("浏览器不支持音频输入");return}s.value=!0,u.value=[],c.value=await v(),o.value=new MediaRecorder(c.value),o.value.start(),o.value.ondataavailable=a=>{u.value.push(a.data);const e=new Blob(u.value,{type:"audio/wav"});t.value=URL.createObjectURL(e)}}_(t,(a,e)=>{URL.revokeObjectURL(e)});function p(){s.value=!1,o.value.stop()}function m(){console.log(t.value),i.value.play()}return h(()=>{c.value?.getTracks().forEach(a=>a.stop())}),(a,e)=>(U(),w(R,null,[e[0]||(e[0]=n("h1",null,"recorder 录音",-1)),n("button",{class:"basicBtn",onMousedown:b,onMouseup:p},B(f(s)?"结束":"开始")+"录音 ",33),n("button",{class:"basicBtn",onClick:m}," 播放录音 "),n("audio",{ref_key:"audio",ref:i,src:f(t),preload:"auto"},null,8,k)],64))}});export{L as default};

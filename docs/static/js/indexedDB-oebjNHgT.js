import{d as m,i as c,o as b,a as p,b as s,t as f,f as D,F as _}from"../../assets/index-05tj2T3Y.js";const g={"text-12":""},B=s("button",{class:"basic-btn"}," 获取数据 ",-1),x="MyTestDatabase",k=m({description:"indexDB使用",__name:"indexedDB",setup(h){const l=[{ssn:"444-44-4444",name:"Bill",age:35,email:"bill@company.com"},{ssn:"555-55-5555",name:"Donna",age:32,email:"donna@home.org"}],u=window.indexedDB,n=c(!1),r=c();function i(){return new Promise((t,a)=>{if(n.value)return a(Error("数据库已打开"));const o=u.open(x);o.onerror=e=>{console.error(e),n.value=!1,a(e)},o.onsuccess=e=>{n.value=!0,r.value=e.target.result,t(e.target.result)},o.onupgradeneeded=e=>{console.log("onupgradeneeded ")}})}function d(){const t=r.value.createObjectStore("names",{autoIncrement:!0});l.forEach(a=>{t.add(a.name)})}return(t,a)=>(b(),p(_,null,[s("h1",g,f(D(n)?"数据库打开成功":"数据库打开失败"),1),s("button",{class:"basic-btn",onClick:i}," 打开数据库 "),s("button",{class:"basic-btn",onClick:d}," 添加一个数据 "),B],64))}});export{k as default};

import{d as g,Q as S,r as h,z as C,c as b,o as _,b as s,h as z,B as P,f as d,G as $,x as E,K as W,R as y,U as m,s as T,i as x,V as B,F as D}from"../../assets/index-DOi-xgW3.js";const k=Symbol("canvasConfig"),N={border:"~ gray-400","border-b":"0",absolute:"","top-0":"","z-1":"","h-50px":"","w-full":"",flex:"","items-center":"","gap-x-5px":"","p-5px":""},V={class:"toolitem"},F=["value"],I={class:"toolitem"},R=["value"],j={class:"toolitem"},H=["^active"],K=["value"],L=g({name:"CanvasTool",__name:"CanvasTool",setup(u){const e=S(k),t=h(),n=C(()=>({width:`${e.eraser.size}px`,height:`${e.eraser.size}px`,transformOrigin:"center",transform:`translate3d(calc(${e.eraser.x}px - 50%), calc(${e.eraser.y}px - 50%), 0)`}));function a(l){const o=l.target.value;e.setConfig({[l.target.id]:o})}function p(){e.ctx.clearRect(0,0,e.ctx.canvas.width,e.ctx.canvas.height)}function f(l){e.setEraser(Number.parseInt(l.target.value))}return(l,o)=>(_(),b("div",N,[s("div",V,[o[1]||(o[1]=s("label",{for:"strokeStyle","gap-5px":""}," 线条颜色:  ",-1)),s("input",{id:"strokeStyle",value:d(e).config.strokeStyle,type:"color",onChange:a},null,40,F)]),s("div",I,[o[2]||(o[2]=s("label",{for:"lineWidth","gap-5px":""}," 线条宽度:  ",-1)),s("input",{id:"lineWidth",value:d(e).config.lineWidth,type:"range",step:"1",min:"1",max:"50",onClick:a},null,8,R)]),s("div",{class:"toolitem"},[s("button",{id:"clear",class:"btn-mask","b-rd-5px":"","p-5px":"",border:"~ gray-400","hover:border":"#000 dark:#fff",onClick:p}," 清空画布 ")]),s("div",j,[s("button",{id:"clear",class:"btn-mask","^active":!!d(e).eraser.enabled,"b-rd-5px":"","p-5px":"",border:"~ gray-400","hover:border":"#000 dark:#fff",onClick:o[0]||(o[0]=v=>d(e).setEraser(!d(e).eraser.enabled))}," 橡皮擦 ",8,H),o[3]||(o[3]=$("  ",-1)),s("input",{id:"eraserSize",value:d(e).eraser.size,type:"range",step:"1",min:"10",max:"50",onChange:f},null,40,K)]),d(e).eraser.enabled?(_(),z(W,{key:0,to:d(e).ctx?.canvas.parentElement||"body"},[s("div",{ref_key:"eraser",ref:t,style:E(d(n)),"pointer-events-none":"",absolute:"","top-0":"","z-10":"","h-20px":"","w-20px":"",border:"~ #fff"},null,4)],8,["to"])):P("",!0)]))}});function M(u){const e=h({strokeStyle:"#9aa2ad",fillStyle:"#9aa2ad",lineWidth:10,lineCap:"round"}),t=y({x:0,y:0,size:10,enabled:!1});return y({ctx:u,config:e,eraser:t,setEraser(n){typeof n=="boolean"?t.enabled=n:typeof n=="number"?t.size=n:(t.x=n.x,t.y=n.y)},setConfig(n){Object.keys(n).forEach(a=>{e.value[a]=n[a]})}})}function O(u,e,t){let n=!1;const a=e,p=Math.PI,f={initPos:{}};function l(i,r){a.beginPath(),a.arc(i,r,a.lineWidth/2,0,p*2),a.fill()}function o(i,r,c,w){a.beginPath(),a.moveTo(i,r),a.lineTo(c,w),a.stroke()}function v(i,r){a.beginPath(),a.clearRect(i-t.eraser.size/2,r-t.eraser.size/2,t.eraser.size,t.eraser.size),a.stroke()}return m(u,"mousedown",i=>{n=!0;const r=i.offsetX,c=i.offsetY;if(f.initPos={x:r,y:c},t.eraser.enabled){t.setEraser({x:r,y:c});return}l(r,c)}),m(u,"mouseup",()=>{n=!1,a.closePath()}),m(u,"mousemove",i=>{const r=i.offsetX,c=i.offsetY;if(t.eraser.enabled){t.setEraser({x:r,y:c}),n&&v(r,c);return}n&&(o(f.initPos.x,f.initPos.y,r,c),f.initPos={x:r,y:c})}),e}const U={relative:"","h-full":"","w-full":"","pt-50px":""},X={relative:"","h-full":"","w-full":"","overflow-hidden":""},Y=g({name:"CanvasDraw",__name:"index",setup(u){const e=h(),t=h(),n=M(t),a=C(()=>n.config);B(k,n);function p(){const l=e.value.clientWidth,o=e.value.clientHeight;e.value.width=l,e.value.height=o,t.value=e.value.getContext("2d"),f(),O(e,t.value,n)}function f(){t.value.strokeStyle=a.value.strokeStyle,t.value.fillStyle=a.value.fillStyle,t.value.lineWidth=a.value.lineWidth,t.value.lineCap=a.value.lineCap}return T(()=>{p()}),(l,o)=>{const v=L;return _(),b("div",U,[x(v),s("div",X,[s("canvas",{ref_key:"canvas",ref:e,"h-full":"","w-full":"",border:"~ gray-400"},null,512)])])}}}),G={w:"1/2"},Q={w:"1/2"},A=g({description:"简单画板",__name:"canvasDrawPage",setup(u){return(e,t)=>{const n=Y;return _(),b(D,null,[s("div",G,[x(n)]),s("div",Q,[x(n)])],64)}}});export{A as default};

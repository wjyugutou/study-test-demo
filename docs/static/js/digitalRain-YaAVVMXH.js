import{r as c}from"./random-iIIaiqwD.js";import{d as b,i as u,E as x,o as y,a as C,b as d,f as h}from"../../assets/index-Jf8bmGHu.js";import"./isObjectLike-KBcu1gfg.js";const E={relative:""},S=["width","height"],o=24,k=5,q=b({description:"数字雨",__name:"digitalRain",setup(R){const n=u(0),i=u(0),f=u();n.value=window.innerWidth-32,i.value=window.innerHeight-52-40-50;const l=Math.ceil(i.value/o),v=Math.ceil(n.value/o),m=Array.from({length:v}).map(t=>({index:c(0,l),length:c(l/2,l+20)}));let e;function p(){function t(){e=f.value.getContext("2d"),e.fillStyle="#000",e.fillRect(0,0,n.value,i.value),a()}t(),window.addEventListener("resize",()=>{n.value=window.innerWidth-32,i.value=window.innerHeight-52-40-50})}let r=0;function a(){if(r++,r!==0&&r<k){requestAnimationFrame(a);return}r=0,e.beginPath(),g(),m.forEach((t,s)=>{w(s*o,t.index*o),t.index++,t.index>=t.length&&(t.index=0,t.length=c(0,l))}),e.closePath(),requestAnimationFrame(a)}function g(){e.fillStyle="rgba(0, 0, 0, 0.1)",e.fillRect(0,0,n.value,i.value)}function w(t,s){e.fillStyle="#087b15",e.font=`${o}px STheiti, SimHei`;const _=c(1,9);e.fillText(`${_}`,t,s)}return x(()=>{p()}),(t,s)=>(y(),C("div",E,[d("canvas",{ref_key:"canvasEl",ref:f,width:h(n),height:h(i),bg:"#000"},null,8,S),d("div",{absolute:"","left-0":"","right-0":"","top-0":"","op-0":"","transition-opacity":"","hover:op-100":""},[d("button",{class:"basic-btn",onClick:a}," next "),d("button",{class:"basic-btn","m-l-2":"",onClick:a}," reload ")])]))}});export{q as default};

import{d as g,x as _,a4 as h,y as d,c as w,e as r,Z as B,u as v,j as n,F as y,b as R}from"./vue-BNDGywnP.js";const U=["src"],L=g({description:"Recorder 录音",__name:"recorder",setup(k){const s=n(!1),o=d(),c=d(),u=n([]),i=n(),t=n("blob:http://127.0.0.1:3333/1b7628d0-7b9f-4707-a0eb-3182c2a1dff6");function f(){return new Promise((a,e)=>{navigator?.mediaDevices?.getUserMedia({audio:!0}).then(l=>{a(l)}).catch(l=>e(l))})}async function b(){if(!navigator?.mediaDevices?.getUserMedia){alert("浏览器不支持音频输入");return}s.value=!0,u.value=[],c.value=await f(),o.value=new MediaRecorder(c.value),o.value.start(),o.value.ondataavailable=a=>{u.value.push(a.data);const e=new Blob(u.value,{type:"audio/wav"});t.value=URL.createObjectURL(e)}}_(t,(a,e)=>{URL.revokeObjectURL(e)});function p(){s.value=!1,o.value.stop()}function m(){console.log(t.value),i.value.play()}return h(()=>{c.value?.getTracks().forEach(a=>a.stop())}),(a,e)=>(R(),w(y,null,[e[0]||(e[0]=r("h1",null,"recorder 录音",-1)),r("button",{class:"basicBtn",onMousedown:b,onMouseup:p},B(v(s)?"结束":"开始")+"录音 ",33),r("button",{class:"basicBtn",onClick:m}," 播放录音 "),r("audio",{ref_key:"audio",ref:i,src:v(t),preload:"auto"},null,8,U)],64))}});export{L as default};

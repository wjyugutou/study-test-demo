import{d as g,i as n,s as v,j as h,k as w,o as y,a as k,b as s,t as B,f,F as R}from"./index-e4a83e0c.js";const U=s("h1",null,"recorder 录音",-1),M=["src"],S=g({name:"Recorder",__name:"recorder",setup(j){const c=n(!1),o=v(),l=v(),u=n([]),d=n(),t=n("blob:http://127.0.0.1:3333/1b7628d0-7b9f-4707-a0eb-3182c2a1dff6");function _(){return new Promise((e,a)=>{var r;(r=navigator==null?void 0:navigator.mediaDevices)==null||r.getUserMedia({audio:!0}).then(i=>{e(i)}).catch(i=>a(i))})}async function b(){var e;if(!((e=navigator==null?void 0:navigator.mediaDevices)!=null&&e.getUserMedia)){alert("浏览器不支持音频输入");return}c.value=!0,u.value=[],l.value=await _(),o.value=new MediaRecorder(l.value),o.value.start(),o.value.ondataavailable=a=>{u.value.push(a.data);const r=new Blob(u.value,{type:"audio/wav"});t.value=URL.createObjectURL(r)}}h(t,(e,a)=>{URL.revokeObjectURL(a)});function p(){c.value=!1,o.value.stop()}function m(){console.log(t.value),d.value.play()}return w(()=>{l.value.getTracks().forEach(e=>e.stop())}),(e,a)=>(y(),k(R,null,[U,s("button",{class:"basicBtn",onMousedown:b,onMouseup:p},B(f(c)?"结束":"开始")+"录音 ",33),s("button",{class:"basicBtn",onClick:m}," 播放录音 "),s("audio",{ref_key:"audio",ref:d,src:f(t),preload:"auto"},null,8,M)],64))}}),O=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));export{O as _};
